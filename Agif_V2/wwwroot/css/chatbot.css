/* =========================
   ASDC Chatbot – Responsive CSS
   ========================= */

/* ---- Design tokens ---- */
:root{
  --asdc-bg:#f5f7fb;
  --asdc-card:#ffffff;
  --asdc-text:#0f172a;
  --asdc-subtext:#475569;
  --asdc-border:#e5e7eb;
  --asdc-primary:#2563eb;
  --asdc-primary-contrast:#ffffff;
  --asdc-note:#eef2ff;
  --asdc-me:#e0f2fe;
  --asdc-bot:#d5f9dd;
  --asdc-shadow:0 12px 30px rgba(0,0,0,.12);
  --asdc-radius:16px;
  --asdc-radius-sm:10px;

  --asdc-vh: 100vh;

  /* spacing scale */
  --sp-1:4px; --sp-2:8px; --sp-3:12px; --sp-4:16px; --sp-5:20px; --sp-6:24px;

  /* sizes */
  --chat-w: 380px;
  --chat-h: min(70vh, calc(var(--asdc-vh) - 120px));
  --chat-bottom: max(16px, env(safe-area-inset-bottom));
  --chat-right: max(16px, env(safe-area-inset-right));
  --chat-left: max(16px, env(safe-area-inset-left));
}

/* Dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --asdc-bg:#0b1220;
    --asdc-card:#0f1629;
    --asdc-text:#e6edf6;
    --asdc-subtext:#a1acc7;
    --asdc-border:#1e293b;
    --asdc-primary:#3b82f6;
    --asdc-note:#0e1a42;
    --asdc-me:#032a3a;
    --asdc-bot:#0e2b14;
    --asdc-shadow:0 12px 30px rgba(0,0,0,.45);
  }
}

/* Global resets for the chat area only */
.asdc-body{
  background: var(--asdc-bg);
  color: var(--asdc-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Hide elements with [hidden] consistently */
[hidden] { display:none !important; }

/* -----------------------
   Floating Toggle Button
   ----------------------- */
.asdc-chat-toggle{
  position: fixed;
  right: var(--chat-right);
  bottom: var(--chat-bottom);
  width: 56px; height: 56px;
  border-radius: 50%;
  border: none;
  background: red;
  color: var(--asdc-primary-contrast);
  display: grid; place-items: center;
  box-shadow: var(--asdc-shadow);
  cursor: pointer;
  z-index: 1000;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    animation: bubble-pulse 2.2s infinite;

}
.asdc-chat-toggle:focus-visible{
  outline: 3px solid color-mix(in oklab, var(--asdc-primary) 30%, white);
  outline-offset: 3px;
}
.asdc-chat-toggle:hover{ transform: translateY(-2px);  animation: bubble-pop 0.4s ease;
 }
    .asdc-chat-toggle:active {
        transform: translateY(0);
        box-shadow: 0 6px 16px rgba(0,0,0,.18);
        transform: scale(0.95);
    }

/* -----------
   Chat modal
   ----------- */
.asdc-chat{
  position: fixed;
  right: calc(var(--chat-right) + 56px + 12px);
  bottom: calc(var(--chat-bottom) + 4px);
  width: var(--chat-w);
  height: var(--chat-h);
  max-height: calc(var(--asdc-vh) - 96px);
  background: var(--asdc-card);
  border: 1px solid var(--asdc-border);
  border-radius: var(--asdc-radius);
  box-shadow: var(--asdc-shadow);
  display: grid;
  grid-template-rows: auto 1fr auto;
  overflow: hidden;
  z-index: 1001;
  transition: opacity .18s ease, transform .18s ease;
  opacity: 1;
}

/* Mobile: bottom sheet */
@media (max-width: 640px){
  .asdc-chat{
    right: var(--chat-left);
    left: var(--chat-left);
    width: auto;
    height: min(88vh, var(--asdc-vh));
    bottom: 0;
    border-radius: 24px 24px 0 0;
    transform-origin: bottom right;
  }
  .asdc-chat-toggle{
    right: var(--chat-right);
    bottom: calc(var(--chat-bottom) + 8px);
  }
}

/* Header */
.asdc-chat-header{
  display: flex; align-items: center; justify-content: space-between;
  gap: var(--sp-3);
  padding: var(--sp-4) var(--sp-4);
  border-bottom: 1px solid var(--asdc-border);
  background:#2671ff;
}
.asdc-chat-header-left{ display: flex; align-items: center; gap: var(--sp-3); }
.asdc-chat-logo{ width: 28px; height: 28px; border-radius: 6px; }
.asdc-chat-title{ margin:0; font-size: 24px; line-height: 1.2; font-weight: 600; color:white; }
.asdc-chat-close{
  border: none; background: transparent; font-size: 22px; line-height: 1; cursor: pointer;
  width: 36px; height: 36px; border-radius: 8px; color: #ebeff3;
}
.asdc-chat-close:hover{ background: rgba(127,127,127,.08); }
.asdc-chat-close:focus-visible{ outline: 2px solid var(--asdc-primary); outline-offset: 2px; }

/* Loading bar */
.asdc-loading{
  padding: var(--sp-3) var(--sp-4);
  font-size: 14px; color: var(--asdc-subtext);
  border-bottom: 1px dashed var(--asdc-border);
}

/* Message list */
.asdc-chat-box{
  padding: var(--sp-4);
  overflow: auto;
  scroll-behavior: smooth;
  background:
    radial-gradient(1200px 200px at 100% 100%, rgba(37,99,235,.06), transparent 60%),
    var(--asdc-card);
}

/* Nice scrollbars */
.asdc-chat-box::-webkit-scrollbar{ width: 10px; }
.asdc-chat-box::-webkit-scrollbar-thumb{
  background: color-mix(in oklab, var(--asdc-border) 60%, #999);
  border-radius: 6px;
}
.asdc-chat-box::-webkit-scrollbar-track{ background: transparent; }

/* Composer */
.asdc-chat-composer{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--sp-3);
  padding: var(--sp-4);
  border-top: 1px solid var(--asdc-border);
  background: linear-gradient(180deg, var(--asdc-card), color-mix(in oklab, var(--asdc-card) 90%, #000));
}
.asdc-input{
  width: 100%;
  padding: 12px 14px;
  border-radius: var(--asdc-radius-sm);
  border: 1px solid var(--asdc-border);
  background: var(--asdc-card);
  color: var(--asdc-text);
  font-size: 14px;
  outline: none;
}
.asdc-input::placeholder{ color: color-mix(in oklab, var(--asdc-subtext) 70%, transparent); }
.asdc-input:focus{ border-color: color-mix(in oklab, var(--asdc-primary) 50%, var(--asdc-border)); box-shadow: 0 0 0 3px color-mix(in oklab, var(--asdc-primary) 25%, transparent); }

.asdc-send{
  border: none; cursor: pointer; padding: 12px 16px;
  border-radius: var(--asdc-radius-sm);
  background: var(--asdc-primary); color: var(--asdc-primary-contrast);
  font-weight: 600; font-size: 14px; min-width: 84px;
  transition: transform .12s ease, background .18s ease, box-shadow .18s ease;
}
.asdc-send:hover{ transform: translateY(-1px); }
.asdc-send:active{ transform: translateY(0); }
.asdc-send:disabled{ opacity:.55; cursor:not-allowed; }

/* Rows */
.asdc-row{ display:flex; align-items:flex-end; gap: var(--sp-3); margin-bottom: var(--sp-3); }
.asdc-row--me{ justify-content: flex-end; }
.asdc-row--bot{ justify-content: flex-start; }

/* Avatars (emoji blocks) */
.asdc-icon{
  width: 28px; height: 28px; border-radius: 50%;
  display:grid; place-items:center; font-size: 16px;
  background: color-mix(in oklab, var(--asdc-border) 60%, #fff);
  color: var(--asdc-text);
}

/* Message bubbles */
.asdc-bubble{
  max-width: 78%;
  border-radius: 16px;
  padding: var(--sp-3) var(--sp-4);
  border: 1px solid var(--asdc-border);
  line-height: 1.45;
  word-wrap:anywhere;
  box-shadow: 0 3px 10px rgba(0,0,0,.06);
}
.asdc-bubble--me{
  background: var(--asdc-me);
  border-color: color-mix(in oklab, var(--asdc-me) 60%, var(--asdc-border));
}
.asdc-bubble--bot{
  background: var(--asdc-bot);
  border-color: color-mix(in oklab, var(--asdc-bot) 60%, var(--asdc-border));
}
.asdc-bubble--note{
  margin: var(--sp-3) auto;
  max-width: 90%;
  background: var(--asdc-note);
  border-color: color-mix(in oklab, var(--asdc-note) 60%, var(--asdc-border));
}

/* Content inside bubble */
.asdc-bubble-content{ display:flex; flex-direction:column; gap: 6px; }
.asdc-text{ font-size: 14px; color: var(--asdc-text);     font-family: Arial, Helvetica, sans-serif; }
.asdc-link a{ color: var(--asdc-primary); text-decoration: underline; }
.asdc-meta{ font-size: 12px; color: var(--asdc-subtext); }

/* Controls (copy / edit) */
.asdc-controls{ display:flex; gap: 10px; align-items:center; margin-top: 2px; }
.asdc-icon-btn{
  border:none; background:transparent; cursor:pointer;
  font-size: 16px; line-height: 1; padding: 4px 6px; border-radius: 6px; color: var(--asdc-subtext);
}
.asdc-icon-btn:hover{ background: rgba(127,127,127,.08); color: var(--asdc-text); }
.asdc-icon-btn:focus-visible{ outline: 2px solid var(--asdc-primary); outline-offset: 2px; }

/* Like / Dislike feedback row */
.asdc-feedback{
  display:flex; justify-content:flex-end; gap: 12px;
  margin-top: 4px;
}

/* Inline edit */
.asdc-edit-wrap{ display:flex; flex-direction:column; gap: var(--sp-3); }
.asdc-edit-input{
  width: 100%; padding: 10px 12px; font-size: 14px;
  border: 1px solid var(--asdc-border); border-radius: var(--asdc-radius-sm);
  background: var(--asdc-card); color: var(--asdc-text);
}
.asdc-edit-btns{ display:flex; gap: var(--sp-3); }
.asdc-btn{
  border: none; cursor: pointer; padding: 8px 12px; border-radius: 8px; font-size: 14px; font-weight: 600;
}
.asdc-btn--gray{ background: #e5e7eb; color: #111827; }
.asdc-btn--gray:hover{ background: #d1d5db; }
.asdc-btn--blue{ background: var(--asdc-primary); color: var(--asdc-primary-contrast); }
.asdc-btn--blue:hover{ filter: brightness(1.05); }

/* --------------
   Animations
   -------------- */
@media (prefers-reduced-motion: no-preference){
  .asdc-chat{ transform: translateY(0); }
  .asdc-chat[hidden]{ opacity:0; transform: translateY(8px); }
}

/* -------------
   Accessibility
   ------------- */
.asdc-chat [role="button"], .asdc-chat button, .asdc-input, .asdc-icon-btn, .asdc-btn{
  -webkit-tap-highlight-color: transparent;
}

/* -----------------------------
   Extra responsive refinements
   ----------------------------- */
@media (max-width: 380px){
  :root{ --chat-w: 92vw; }
  .asdc-bubble{ max-width: 86%; }
  .asdc-chat-title{ font-size: 15px; }
  .asdc-send{ min-width: 76px; padding: 10px 12px; }
}

@media (max-width: 320px){
  .asdc-bubble{ max-width: 90%; padding: var(--sp-3); }
  .asdc-chat-composer{ grid-template-columns: 1fr auto; }
}

/* -------------
   Print safety
   ------------- */
@media print{
  .asdc-chat, .asdc-chat-toggle{ display:none !important; }
}
/* Bubble (pop) animation */
@keyframes bubble-pop {
  0%   { transform: scale(1); }
  30%  { transform: scale(1.15); }
  60%  { transform: scale(0.9); }
  100% { transform: scale(1); }
}

/* Pulsing “breathing” animation */
@keyframes bubble-pulse {
  0%   { box-shadow: 0 0 0 0 rgba(124,92,255,0.6); }
  70%  { box-shadow: 0 0 0 18px rgba(124,92,255,0); }
  100% { box-shadow: 0 0 0 0 rgba(124,92,255,0); }
}

/* Apply effect to toggle button */


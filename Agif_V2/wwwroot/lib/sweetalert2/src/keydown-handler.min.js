/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/sweetalert2@11.16.1/src/keydown-handler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{clickConfirm}from"./staticMethods/dom.js";import{DismissReason}from"./utils/DismissReason.js";import*as dom from"./utils/dom/index.js";import{callIfFunction}from"./utils/utils.js";export const removeKeydownHandler=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)};export const addKeydownHandler=(e,t,n)=>{removeKeydownHandler(e),t.toast||(e.keydownHandler=e=>keydownHandler(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:dom.getPopup(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)};export const setFocus=(e,t)=>{const n=dom.getFocusableElements();if(n.length)return(e+=t)===n.length?e=0:-1===e&&(e=n.length-1),void n[e].focus();dom.getPopup()?.focus()};const arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?handleEnter(t,e):"Tab"===t.key?handleTab(t):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(t.key)?handleArrows(t.key):"Escape"===t.key&&handleEsc(t,e,n)))},handleEnter=(e,t)=>{if(!callIfFunction(t.allowEnterKey))return;const n=dom.getInput(dom.getPopup(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;clickConfirm(),e.preventDefault()}},handleTab=e=>{const t=e.target,n=dom.getFocusableElements();let o=-1;for(let e=0;e<n.length;e++)if(t===n[e]){o=e;break}e.shiftKey?setFocus(o,-1):setFocus(o,1),e.stopPropagation(),e.preventDefault()},handleArrows=e=>{const t=dom.getActions(),n=dom.getConfirmButton(),o=dom.getDenyButton(),r=dom.getCancelButton();if(!(t&&n&&o&&r))return;const s=[n,o,r];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const d=arrowKeysNextButton.includes(e)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[d],!a)return;if(a instanceof HTMLButtonElement&&dom.isVisible(a))break}a instanceof HTMLButtonElement&&a.focus()}},handleEsc=(e,t,n)=>{callIfFunction(t.allowEscapeKey)&&(e.preventDefault(),n(DismissReason.esc))};
//# sourceMappingURL=/sm/32639beb08dea49f2299a01e2730888625c726578b0c63c550d056f86d37e29f.map
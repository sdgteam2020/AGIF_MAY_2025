@model DataTransferObject.Request.DTOOnlineApplication

@{
    ViewData["Title"] = "Application Form";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";

    // string loanType = Model?.loantype ?? Context.Request.Query["loanType"].ToString() ?? "CA";
    // string applicantCategory = Model?.applicantCategory ?? Context.Request.Query["applicantCategory"].ToString() ?? "CA";

    string Category = Model?.loantype ?? TempData["CategoryNew"] as string ?? "CA";
    string Purpose = Model?.applicantCategory ?? TempData["WithdrwalPurposeNew"] as string ?? "CA";
}
<style>
 .ui-autocomplete {
        z-index: 1050 !important; /* higher than your popup/modal */
    }
  #unitSearchDialog input {
        text-align: left !important;
        font-size: 20px;
    }

    .uploadDialog {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.5); /* semi-transparent dark background */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1050; /* Make sure it's on top of other elements */
        padding: 10px;
    }

    /* Styling for the dialog box */
    .dialog-box {
        background-color: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        max-height: 80vh;
        width: 60%;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 20px; /* Add space between elements */
        transition: all 0.3s ease-in-out;
    }

        /* Heading style */
        .dialog-box h4 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

    /* Input field styling */
    #unitSearchDialog input {
        font-size: 1.2rem;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s;
    }

        #unitSearchDialog input:focus {
            border-color: #007bff; /* Blue color on focus */
            outline: none;
        }

    /* Error message styling */
    #unitSearchMessage {
        font-size: 18px;
        font-weight: normal;
        color: red;
        margin-top: -8px;
    }

    /* Button styles */
  
    #unitSearchDialog .dialog-box {
        width: 600px; /* keep your width */
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        display: flex;
        flex-direction: column;
        align-items: center; /* center children horizontally */
    }

    #unitSearchDialog h4 {
        margin-bottom: 20px;
        font-weight: 600;
        font-size: 1.5rem;
        text-align: center;
    }

    #unitSearchInput {
        width: 100%; /* full width inside dialog */
        font-weight: bold;
        font-size: 20px; /* larger font size */
        padding: 12px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        box-sizing: border-box;
        text-align: center; /* center the text */
        outline-offset: 2px;
        transition: border-color 0.3s;
    }

        #unitSearchInput:focus {
            border-color: #4292f4;
            box-shadow: 0 0 8px rgba(66,146,244,0.5);
        }

    #unitSearchMessage {
        margin-top: 8px;
        min-height: 1.2em;
        font-size: 18px;
        color: #d9534f;
        text-align: center;
        width: 100%;
    }

    #unitSearchDialog .d-flex.justify-content-end.mt-3 {
        justify-content: center !important; /* center the buttons container */
        gap: 15px; /* spacing between buttons */
        margin-top: 25px !important;
        width: 100%;
    }

    #unitSearchCancelBtn,
    #unitSearchConfirmBtn {
        min-width: 120px;
        font-weight: 600;
        padding: 12px 25px;
        border-radius: 8px;
    }
</style>

<link href="~/css/onlineapplication.css" rel="stylesheet" />

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<div class="container-fluid mt-2">

    <div class="pagetitletwo position-relative text-center mb-3">
        <h1>Application Form <span id="loanTypeSpan">Loan Type</span></h1>
        <button class="btn btn-secondary position-absolute end-0 top-50 translate-middle-y" style=" margin-top:-29px" id="toggleAll">Expand All</button>
    </div>
    @* <span>
        Prefix:- @if (Model.CommonData != null) { @Model.CommonData.ArmyPrefix; }
    </span> *@
    
    <div class="accordion" id="formAccordion">
        <form id="myForm" class="needs-validation mb-8" name="myForm" method="post" action="/OnlineApplication/SubmitApplication" enctype="multipart/form-data">
            <!-- Personal Info -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button fs-5 acc-btn" style="height:50px" type="button" data-bs-toggle="collapse" data-bs-target="#personalInfo" aria-expanded="true">
                        <span class="w-100 text-center text-decoration-underline"><strong>Personal Details </strong></span>
                    </button>
                </h2>
                <div id="personalInfo" class="accordion-collapse collapse show" data-bs-parent="#formAccordion">
                    <div class="accordion-body">
                        <div class="row g-3">


                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <div class="col-md-2">
                                                <span class="input-group-text">👮</span>
                                            </div>
                                            <div class="col-md-10">
                                                <select class="select form-select" id="armyPrefix" name="CommonData.ArmyPrefix" required data-army-prefix="@if (Model.CommonData != null) {
                                                @Model.CommonData.ArmyPrefix; }">
                                                    
                                                </select>
                                                <label class="form-label select-label ">Army No</label>
                                                @Html.ValidationMessageFor(m => m.CommonData.ArmyPrefix, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🔟</span>
                                            <div class="form-outline" data-mdb-input-init>
                                                <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Number</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.CommonData.Number, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🧩</span>
                                            <div class="form-outline" data-mdb-input-init>
                                                <input type="text" id="txtSuffix" name="CommonData.Suffix" class="form-control readonly-blocked" value="@Model.CommonData?.Suffix" maxlength="1" required readonly tabindex="-1" />
                                                <label class="form-label" for="txtSuffix">Suffix</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.CommonData.Suffix, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <div class="col-md-2">
                                                <span class="input-group-text">👮</span>
                                            </div>
                                            <div class="col-md-10">
                                                <select class="select form-select" id="oldArmyPrefix" name="CommonData.OldArmyPrefix" required data-oldarmy-prefix="@if (Model.CommonData != null) {
                                                @Model.CommonData.OldArmyPrefix; }">
                                                </select>
                                                <label class="form-label select-label ">Old Army No</label>
                                                @Html.ValidationMessageFor(m => m.CommonData.OldArmyPrefix, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🔟</span>
                                            <div class="form-outline" data-mdb-input-init>
                                                <input type="text" id="oldArmyNo" name="CommonData.OldNumber" onchange="SetSuffixLetter(this)" class="form-control" value="@Model.CommonData?.OldNumber" maxlength="8" oninput="ValInDataNo(this)" required pattern="^\d{3,8}$" />
                                                <label class="form-label" for="txtOldNumber">Number</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.CommonData.OldNumber, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🧩</span>
                                            <div class="form-outline" data-mdb-input-init>
                                                <input type="text" id="txtOldSuffix" name="CommonData.OldSuffix" class="form-control readonly-blocked" readonly tabindex="-1" value="@Model.CommonData?.OldSuffix" />
                                                <label class="form-label" for="txtOldSuffix">Suffix</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.CommonData.OldSuffix, "", new { @class = "text-danger" })

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">👮</span>
                                    </div>
                                    <div class="col-md-10">
                                        <select class="select form-select" id="ddlrank" name="CommonData.DdlRank" required data-rank-prefix="@if (Model.CommonData != null) {
                                                @Model.CommonData.DdlRank; }">
                                        </select>
                                        <label class="form-label select-label ">Rank & Trade</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.DdlRank, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">👮</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="txtApplicantName" name="CommonData.ApplicantName" class="form-control" value="@Model.CommonData?.ApplicantName" required oninput="ValInDataLetter(this)" />
                                        <label class="form-label" for="armyNumber">Applicant Name</label>
                                        <div class="invalid-feedback">
                                            Please choose a username.
                                        </div>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.ApplicantName, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🎂</span>
                                    <div class="form-outline" data-mdb-input-init>
                                    <input type="date" class="form-control" id="dateOfBirth" aria-label="Date of Birth" name="CommonData.DateOfBirth" value="@Model.CommonData?.DateOfBirth?.ToString("yyyy-MM-dd")" required style="caret-color: transparent;"
                                    onchange="SetRetDate()">
                                    <label class="form-label select-label ">DOB</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.DateOfBirth, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📅</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="date" class="form-control" id="dateOfCommission" aria-label="Date of Commission" name="CommonData.DateOfCommission"  style="caret-color: transparent;"
                                           required value="@Model.CommonData?.DateOfCommission?.ToString("yyyy-MM-dd")" onchange="calculateYearDifference();SetRetDate()">
                                        <label class="form-label select-label ">DOC/DOE</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.DateOfCommission, "", new { @class = "text-danger" })

                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">👮</span>
                                    </div>
                                    <div class="col-md-10">
                                        @*<select class="select form-select" id="ExtnOfService" onchange="extensionOfService()" name="CommonData.ExtnOfService"  onblur="ExtensionOfServiceAccess()">
                                            <option value="" selected disabled>Select one</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>*@
                                         @Html.DropDownListFor(m => m.CommonData.ExtnOfService, 
                                                                            new SelectList(new[] {
                                                                                new { Value = "", Text = "Select one" },
                                                                                new { Value = "Yes", Text = "Yes" },
                                                                                new { Value = "No", Text = "No" }
                                                                            }, "Value", "Text"), 
                                                                            new { 
                                                                                @class = "select form-select", 
                                                                                id = "ExtnOfService", 
                                                                                onchange = "extensionOfService()", 
                                                                                onblur = "ExtensionOfServiceAccess()" 
                                                                            })
                                        <label class="form-label select-label ">Extn of Service in Present Rank</label>
                                        @* @Html.ValidationMessageFor(m => m.CommonData.ExtnOfService, "", new { @class = "text-danger" }) *@
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📅</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="date" class="form-control" id="dateOfPromotion" aria-label="Date of Promotion" name="CommonData.DateOfPromotion" value="@Model.CommonData?.DateOfPromotion?.ToString("yyyy-MM-dd")" disabled style="caret-color: transparent;"
                                    onkeydown="return false;" onchange="updateRetDateOnPromotionDateSelection()">
                                        <label class="form-label select-label ">Date of Prom(Sub Maj Only)</label>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📅</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="date" class="form-control " id="dateOfRetirement" aria-label="Date of Retirement" value="@Model.CommonData?.DateOfRetirement?.ToString("yyyy-MM-dd")" name="CommonData.DateOfRetirement" tabindex="-1" readonly>
                                        <label class="form-label select-label ">Date of Retirement</label>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🆔</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="aadharCardNo" name="CommonData.AadharCardNo" class="form-control" oninput="formatAadhar(this)" value="@Model.CommonData?.AadharCardNo" onkeyup="ValInAadhar(this)" maxlength="14" required />
                                        <label class="form-label select-label ">Aadhar Card No</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.AadharCardNo, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🆔</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="panCardNo" name="CommonData.PanCardNo" data-inputmask="'mask': 'AAAAA9999A', 'placeholder': 'AAAAA0000A'" class="form-control" value="@Model.CommonData?.PanCardNo" placeholder="AAAAA0000A" required />
                                        <label class="form-label select-label ">PAN No</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.PanCardNo, "", new { @class = "text-danger" })

                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📱</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="mobileNo" name="CommonData.MobileNo" class="form-control" maxlength="10" onblur="verifyMobileNo(this)" oninput="ValInDataNo(this)" value="@Model.CommonData?.MobileNo" required />
                                        <label class="form-label select-label ">Mobile No</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.MobileNo, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-3">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="emailId" name="CommonData.Email" class="form-control" maxlength="64" value="@Model.CommonData?.Email" required />
                                        <label class="form-label select-label ">Email ID</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.Email, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-1">
                                <div class="input-group mb-2">
                                    <select id="emailDomain" name="CommonData.EmailDomain" class="form-select" required>
                                        <option value="gmail.com">gmail.com</option>
                                        <option value="yahoo.com">yahoo.com</option>
                                        <option value="outlook.com">outlook.com</option>
                                    </select>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.EmailDomain, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📆</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="totalService" name="CommonData.TotalService" class="form-control readonly-blocked" readonly tabindex="-1" value="@Model.CommonData?.TotalService" required />
                                        <label class="form-label select-label ">Total Service(Years)</label>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📆</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="residualService" name="CommonData.ResidualService" class="form-control readonly-blocked" readonly tabindex="-1" value="@Model.CommonData?.ResidualService" required />
                                        <label class="form-label select-label ">Residual Service(Years)</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Regt/Unit Details-->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed fs-5 acc-btn" style="height:50px" type="button" data-bs-toggle="collapse" data-bs-target="#regt_Unit" aria-expanded="false">
                        <span class="w-100 text-center text-decoration-underline"><strong>Regt/Unit Details</strong></span>
                    </button>
                </h2>
                <div id="regt_Unit" class="accordion-collapse collapse" data-bs-parent="#formAccordion">
                    <div class="accordion-body">
                        <div class="row g-3">
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">💼</span>
                                    </div>
                                    <div class="col-md-10">
                                        <select class="form-select select" id="regtCorps" aria-label="Regt/Corps" name="CommonData.RegtCorps" onchange="fetchPCDA_PAO()" required data-regt-prefix="@if (Model.CommonData != null) {
                                                @Model.CommonData.RegtCorps; }">
                                        </select>
                                        <label class="form-label select-label ">Regt/Corps</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.RegtCorps, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">💼</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="pcda_pao" name="CommonData.pcda_pao" class="form-control readonly-blocked" required readonly tabindex="-1" />
                                        <label class="form-label select-label ">PCDA(O)/PAO(OR)</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.pcda_pao, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">📒</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="pcda_AcctNo" name="CommonData.pcda_AcctNo" class="form-control" data-inputmask="'mask': '99/999/999999A', 'placeholder': '99/999/999999A'" placeholder="99/999/999999A" required readonly />
                                        <label class="form-label select-label ">PCDA(O) Acct No</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.pcda_AcctNo, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>

                              <div class="col-md-2">
                                <div class="input-group mb-2">
                                        <div class="col-md-2">
                                            <span class="input-group-text">🪖</span>
                                        </div>
                                        <div class="col-md-10">
                                            @Html.EditorFor(m => m.CommonData.ParentUnit, new { htmlAttributes = new { @class = "form-control form-control-Alphabets d-none", @required = "required", @onkeyup = "ValInData(this)", @dirName = "ParentUnit's name" } })
                                            @Html.ValidationMessageFor(m => m.CommonData.ParentUnit, "", new { @class = "text-danger" })
                                            <span id="ParentUnitId" class="d-none">@Model.CommonData?.ParentUnit</span>
                                            <input type="text" class="form-control form-control-Alphabets" id="ParenttxtUnit" placeholder="Search Parent Unit..."   />                 
                                            </div>
                                </div>
                            </div>

                     <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                         <span class="input-group-text">🪖</span>
                                </div>
                                      <div class="col-md-10">
                                         @Html.EditorFor(model => model.CommonData.PresentUnit, new { htmlAttributes = new { @class = "form-control form-control-Alphabets d-none", @required = "required", @onkeyup = "ValInData(this)", @dirName = "PresentUnit's name" } })
                                         @Html.ValidationMessageFor(model => model.CommonData.PresentUnit, "", new { @class = "text-danger" })
                                          <span id="PresentUnitId" class="d-none">@Model.CommonData?.PresentUnit</span>
                                          <input type="text" class="form-control form-control-Alphabets" id="PresenttxtUnit"  placeholder="Search Present Unit..."  />
                                      </div>
                                   </div>
                            @* <span class="input-group-text">🪖</span> *@
    
                        </div>

                         @Html.HiddenFor(model => model.CommonData.IOUnit)

	  
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🧷</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="presentUnitPin" name="CommonData.PresentUnitPin" class="form-control" onchange="validateUnitPin(this)" onkeydown="ValInDataNo" onkeyup="ValInDataNo" required maxlength="6" value="@Model.CommonData?.PresentUnitPin" />
                                        <label class="form-label select-label ">Present Unit PIN</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.PresentUnitPin, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">📮</span>
                                    </div>
                                    <div class="col-md-10">
                                        <select class="form-select select" id="armyPostOffice" name="CommonData.ArmyPostOffice" aria-label="armyPostOffice" required data-armypost-prefix="@if (Model.CommonData != null) {
                                                @Model.CommonData.ArmyPostOffice; }">
                                        </select>
                                        <label class="form-label select-label ">Army Post Office</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.ArmyPostOffice, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏠</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="civilPostalAddress" name="CommonData.CivilPostalAddress" class="form-control readonly-blocked" required readonly />
                                        <label class="form-label select-label ">Civ Postal Address</label>
                                        @Html.ValidationMessageFor(m => m.CommonData.CivilPostalAddress, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏢</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="nextFmnHQ" name="CommonData.NextFmnHQ" class="form-control" value="@Model.CommonData?.NextFmnHQ" required />
                                        <label class="form-label select-label ">Next Fmn HQ</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.NextFmnHQ, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        

            <!-- Salary Account Details -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed fs-5 acc-btn" style="height:50px" type="button" data-bs-toggle="collapse" data-bs-target="#salaryAcctDetails" aria-expanded="false">

                        <span class="w-100 text-center text-decoration-underline"><strong>Salary Account Details</strong></span>
                    </button>
                </h2>
                <div id="salaryAcctDetails" class="accordion-collapse collapse" data-bs-parent="#formAccordion">
                    <div class="accordion-body">
                        <div class="row g-3">
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="password" id="salaryAcctNo" name="CommonData.SalaryAcctNo" class="form-control" maxlength="17" onkeydown="ValInDataNo(this)" onkeyup="ValInDataNo(this)" onchange="validateAccountNo(this)" value="@Model.CommonData?.SalaryAcctNo" required />
                                        <label class="form-label select-label ">Applicant's Salary Acct No</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.SalaryAcctNo, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="confirmSalaryAcctNo" name="CommonData.ConfirmSalaryAcctNo" class="form-control" onchange="confirmAccountNo(this)" maxlength="17" onkeydown="ValInDataNo(this)" onkeyup="ValInDataNo(this)" value="@Model.CommonData?.ConfirmSalaryAcctNo" required />
                                        <label class="form-label select-label ">Re-Enter Salary Acct No</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.ConfirmSalaryAcctNo, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="ifsCode" name="CommonData.IfsCode" class="form-control" data-inputmask="'mask': 'AAAA9999999', 'placeholder': 'AAAA9999999'" placeholder="AAAA9999999" value="@Model.CommonData?.IfsCode" required />
                                        <label class="form-label select-label ">IFSC of Bank</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="nameOfBank" name="CommonData.NameOfBank" class="form-control" onkeydown="ValInData(this)" onkeyup="ValInData(this)" maxlength="50" value="@Model.CommonData?.NameOfBank" required />
                                        <label class="form-label select-label ">Name of Bank</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="nameOfBankBranch" name="CommonData.NameOfBankBranch" class="form-control" onkeydown="ValInData(this)" onkeyup="ValInData(this)" maxlength="50" value="@Model.CommonData?.NameOfBankBranch" required />
                                        <label class="form-label select-label ">Name of Bank Branch</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.NameOfBankBranch, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

           
           
            @{
                if (Category == "1")
                {
                    <!-- HBA Application -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button  fs-5 acc-btn" type="button" data-bs-toggle="collapse" style="height:50px" type="button" data-bs-target="#educationDetails" aria-expanded="false">
                <span class="w-100 text-center text-decoration-underline"><strong>For Education only (Applicable for children studying in 12th Class and above)</strong></span>
            </button>
        </h2>
        <div id="educationDetails" class="accordion-collapse collapse" data-bs-parent="#formAccordion">
            <div class="accordion-body">
                        <div class="row g-3">
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="txtApplicantName" name="CommonData.ApplicantName" class="form-control" value="@Model.CommonData?.ApplicantName" required oninput="ValInDataLetter(this)" />
                                        <label class="form-label" for="armyNumber">Name of Child</label>
                                        <div class="invalid-feedback">
                                            Please choose a username.
                                        </div>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.SalaryAcctNo, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                          <input type="date" class="form-control" id="dateOfBirth" aria-label="Date of Birth" name="CommonData.DateOfBirth" value="@Model.CommonData?.DateOfBirth?.ToString("yyyy-MM-dd")" required style="caret-color: transparent;"
                                    onchange="SetRetDate()">
                                    <label class="form-label select-label ">DOB</label>
                                    </div>
                                  
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.ConfirmSalaryAcctNo, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">DO Part-II No</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="date" class="form-control" id="dateOfBirth" aria-label="Date of Birth" name="CommonData.DateOfBirth" value="@Model.CommonData?.DateOfBirth?.ToString("yyyy-MM-dd")" required style="caret-color: transparent;"
                                    onchange="SetRetDate()">
                                    <label class="form-label select-label ">DO Part-II Date</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                    <div class="mb-2">

                                      <input type="file" id="Attach_Part_II_Order" name="Attach_Part_II_Order" class="form-control" required />
                                      @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                                      </div>
                             </div>

                        <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Presently studying in</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>
                            
                            
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">👮</span>
                                    </div>
                                    <div class="col-md-10">
                                        @*<select class="select form-select" id="ExtnOfService" onchange="extensionOfService()" name="CommonData.ExtnOfService"  onblur="ExtensionOfServiceAccess()">
                                            <option value="" selected disabled>Select one</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>*@
                                         @Html.DropDownListFor(m => m.CommonData.ExtnOfService, 
                                                                            new SelectList(new[] {
                                                                                new { Value = "", Text = "Select one" },
                                                                                new { Value = "Yes", Text = "Yes" },
                                                                                new { Value = "No", Text = "No" }
                                                                            }, "Value", "Text"), 
                                                                            new { 
                                                                                @class = "select form-select", 
                                                                                id = "ExtnOfService", 
                                                                                onchange = "extensionOfService()", 
                                                                                onblur = "ExtensionOfServiceAccess()" 
                                                                            })
                                        <label class="form-label select-label ">Name of Course/Class for withdrawal required</label>
                                        @* @Html.ValidationMessageFor(m => m.CommonData.ExtnOfService, "", new { @class = "text-danger" }) *@
                                    </div>
                                </div>
                            </div>


                               <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Name of College/Institution where studying
                                                </label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>


                              <div class="col-md-2">
                                    <div class="mb-2">

                                      <input type="file" id="Attach_Part_II_Order" name="Attach_Part_II_Order" class="form-control" required />
                                      @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                                      </div>
                             </div>


                             <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Total Expenditure</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>

                        </div>
                        
                    </div>
        </div>
    </div>

                }
                else if (Category == "2")
                {
                    <!-- CA Application -->
                  <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button  fs-5 acc-btn" type="button" data-bs-toggle="collapse" style="height:50px" type="button" data-bs-target="#educationDetails" aria-expanded="false">
                <span class="w-100 text-center text-decoration-underline"><strong>For Marriage Purpose Only</strong></span>
            </button>
        </h2>
        <div id="educationDetails" class="accordion-collapse collapse" data-bs-parent="#formAccordion">
            <div class="accordion-body">
                        <div class="row g-3">
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="txtApplicantName" name="CommonData.ApplicantName" class="form-control" value="@Model.CommonData?.ApplicantName" required oninput="ValInDataLetter(this)" />
                                        <label class="form-label" for="armyNumber">Name of Child</label>
                                        <div class="invalid-feedback">
                                            Please choose a username.
                                        </div>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.SalaryAcctNo, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏧</span>
                                    <div class="form-outline" data-mdb-input-init>
                                          <input type="date" class="form-control" id="dateOfBirth" aria-label="Date of Birth" name="CommonData.DateOfBirth" value="@Model.CommonData?.DateOfBirth?.ToString("yyyy-MM-dd")" required style="caret-color: transparent;"
                                    onchange="SetRetDate()">
                                    <label class="form-label select-label ">DOB</label>
                                    </div>
                                  
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.ConfirmSalaryAcctNo, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">DO Part-II No</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="date" class="form-control" id="dateOfBirth" aria-label="Date of Birth" name="CommonData.DateOfBirth" value="@Model.CommonData?.DateOfBirth?.ToString("yyyy-MM-dd")" required style="caret-color: transparent;"
                                    onchange="SetRetDate()">
                                    <label class="form-label select-label ">DO Part-II Date</label>
                                    </div>
                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-md-2">
                                    <div class="mb-2">

                                      <input type="file" id="Attach_Part_II_Order" name="Attach_Part_II_Order" class="form-control" required />
                                      @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                                      </div>
                             </div>

                        <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Presently studying in</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>
                            
                            
                            <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <div class="col-md-2">
                                        <span class="input-group-text">👮</span>
                                    </div>
                                    <div class="col-md-10">
                                        @*<select class="select form-select" id="ExtnOfService" onchange="extensionOfService()" name="CommonData.ExtnOfService"  onblur="ExtensionOfServiceAccess()">
                                            <option value="" selected disabled>Select one</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>*@
                                         @Html.DropDownListFor(m => m.CommonData.ExtnOfService, 
                                                                            new SelectList(new[] {
                                                                                new { Value = "", Text = "Select one" },
                                                                                new { Value = "Yes", Text = "Yes" },
                                                                                new { Value = "No", Text = "No" }
                                                                            }, "Value", "Text"), 
                                                                            new { 
                                                                                @class = "select form-select", 
                                                                                id = "ExtnOfService", 
                                                                                onchange = "extensionOfService()", 
                                                                                onblur = "ExtensionOfServiceAccess()" 
                                                                            })
                                        <label class="form-label select-label ">Name of Course/Class for withdrawal required</label>
                                        @* @Html.ValidationMessageFor(m => m.CommonData.ExtnOfService, "", new { @class = "text-danger" }) *@
                                    </div>
                                </div>
                            </div>


                               <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Name of College/Institution where studying
                                                </label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>


                              <div class="col-md-2">
                                    <div class="mb-2">

                                      <input type="file" id="Attach_Part_II_Order" name="Attach_Part_II_Order" class="form-control" required />
                                      @Html.ValidationMessageFor(m => m.CommonData.NameOfBank, "", new { @class = "text-danger" })
                                      </div>
                             </div>


                             <div class="col-md-2">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">🏦</span>
                                    <div class="form-outline" data-mdb-input-init>
                                       <input type="text" id="armyNumber" name="CommonData.Number" value="@Model.CommonData?.Number" onchange="SetSuffixLetter(this)" class="form-control"  onblur="getApplicantDetalis(this)" oninput="ValInDataNo(this)" required maxlength="8" pattern="^\d{3,8}$" />
                                                <label class="form-label" for="armyNumber">Total Expenditure</label>
                                    </div>

                                </div>
                                @Html.ValidationMessageFor(m => m.CommonData.IfsCode, "", new { @class = "text-danger" })
                            </div>

                        </div>
                        
                    </div>
        </div>
    </div>
                }
                else
                {
                    <!-- PCA Application -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed fs-5 acc-btn" style="height:50px" type="button" data-bs-toggle="collapse" data-bs-target="#computerDetails" aria-expanded="false">

                                <span class="w-100 text-center text-decoration-underline"><strong>Personal Computer and Loan Details</strong></span>
                            </button>
                        </h2>
                        <div id="computerDetails" class="accordion-collapse collapse" data-bs-parent="#formAccordion">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🏠</span>
                                            <div class="form-outline" data-mdb-input-init>
                                            <input type="text" id="PCA_dealerName" name="PCAApplication.PCA_dealerName" class="form-control" required onkeyup="ValInData(this)"  value="@Model.PCAApplication?.PCA_dealerName" />
                                                <label class="form-label select-label ">Dealers Name and Address</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_dealerName, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <div class="col-md-1">
                                                <span class="input-group-text">👮</span>
                                            </div>
                                            <div class="col-md-11">
                                            <select class="form-select select" id="computer_Loan_Type" aria-label="Computer Loan Type" name="PCAApplication.computer_Loan_Type" required data-pcaloantype-prefix="@if (Model.PCAApplication != null) {
                                                                @Model.PCAApplication.computer_Loan_Type;}">
                                            
                                                </select>
                                                <label class="form-label select-label" for="computer_Loan_Type">Computer Loan Type</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.computer_Loan_Type, "", new { @class = "text-danger" })
                                    </div>

                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_companyName" name="PCAApplication.PCA_companyName" class="form-control" onkeyup="ValInData(this)" required value="@Model.PCAApplication?.PCA_companyName" />
                                                <label class="form-label select-label ">Company Name</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_companyName, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_modelName" name="PCAApplication.PCA_modelName" class="form-control" onkeyup="ValInData(this)" required value="@Model.PCAApplication?.PCA_modelName" />
                                                <label class="form-label select-label ">Model Name</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_modelName, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="computerCost" name="PCAApplication.computerCost" class="form-control" maxlength="12" oninput="formatIndianNumber(this)" required value="@Model.PCAApplication?.computerCost" />
                                                <label class="form-label select-label ">Total Price of Computer</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.computerCost, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <div class="col-md-1">
                                                <span class="input-group-text">👮</span>
                                            </div>
                                            <div class="col-md-11">
                                        <select class="form-select select" id="PCA_LoanFreq" aria-label="Frequency of Loan" name="PCAApplication.PCA_LoanFreq" required data-pcaloanfreq-prefix="@if (Model.PCAApplication != null) {
                                                                @Model.PCAApplication.PCA_LoanFreq;}">
">
                                                </select>
                                                <label class="form-label select-label ">Frequency of Loan</label>
                                            </div>

                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_LoanFreq, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_Amt_Eligible_for_loan" name="PCAApplication.PCA_Amt_Eligible_for_loan" class="form-control readonly-blocked" required readonly value="@Model.PCAApplication?.PCA_Amt_Eligible_for_loan" />
                                                <label class="form-label select-label ">Max Eligible Loan Amount</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_Amt_Eligible_for_loan, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_EMI_Eligible" name="PCAApplication.PCA_EMI_Eligible" class="form-control readonly-blocked" required readonly value="@Model.PCAApplication?.PCA_EMI_Eligible" />
                                                <label class="form-label select-label ">Max EMI Eligible</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_EMI_Eligible, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_repayingCapacity" name="PCAApplication.PCA_repayingCapacity" class="form-control readonly-blocked" readonly required value="@Model.PCAApplication?.PCA_repayingCapacity" />
                                                <label class="form-label select-label ">Your max EMI Repaying Capacity</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_repayingCapacity, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_Amount_Applied_For_Loan" name="PCAApplication.PCA_Amount_Applied_For_Loan" class="form-control" oninput="formatIndianNumber(this);validateAmount_PCA(this)" required value="@Model.PCAApplication?.PCA_Amount_Applied_For_Loan" />
                                                <label class="form-label select-label ">Amount Applied For Loan</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_Amount_Applied_For_Loan, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_EMI_Applied" name="PCAApplication.PCA_EMI_Applied" class="form-control" oninput="validateEMI_PCA(this);calculateEMI_PCA()" required value="@Model.PCAApplication?.PCA_EMI_Applied" />
                                                <label class="form-label select-label ">No of EMI Applied</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_EMI_Applied, "", new { @class = "text-danger" })

                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_approxEMIAmount" name="PCAApplication.PCA_approxEMIAmount" class="form-control readonly-blocked" readonly required value="@Model.PCAApplication?.PCA_approxEMIAmount" />
                                                <label class="form-label select-label ">Your Approx EMI Amount will be</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_approxEMIAmount, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group mb-2">
                                            <span class="input-group-text">🗺️</span>
                                            <div class="form-outline" data-mdb-input-init>
                                        <input type="text" id="PCA_approxDisbursementAmt" name="PCAApplication.PCA_approxDisbursementAmt" class="form-control readonly-blocked" readonly required value="@Model.PCAApplication?.PCA_approxDisbursementAmt" />
                                                <label class="form-label select-label ">Approx Disbursement Amount</label>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.PCAApplication.PCA_approxDisbursementAmt, "", new { @class = "text-danger" })
                                    </div>
                                    

                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            <input type="hidden" id="totalResidualMonth" name="totalResidualMonth" value="0" />
            <div class="col-md-12">
                <div class="mt-4 text-center">
                    <button class="btn btn-primary" id="btn-save" type="submit">Next</button>
                    <!-- <a href="/Upload/Upload?formType=CA" class="btn btn-primary">CA Form</a>
                    <a href="/Upload/Upload?formType=PCA" class="btn btn-primary">PCA Form</a>
                    <a href="/Upload/Upload?formType=HBA" class="btn btn-primary">HBA Form</a-->
                    <button type="button" class="btn btn-primary" id="fillDemoDataBtn">Fill Demo Data</button>

                </div>
            </div>
            <div class="col-md-12" id="msgerror" style="margin-top: 10px;">
            </div>

            <input type="hidden" id="Category" name="Category" value=@Category />
            <input type="hidden" id="Purpose" name="Purpose" value=@Purpose />
            <input type="hidden" id="COArmyNo" name="COArmyNo" value=@Model.COArmyNo />

        <div id="unitSearchDialog" class="uploadDialog" style="display:none;">
        <div class="dialog-box" style="width: 668px;">
            <h3 class="text-center mb-3">Please Enter Army No to Your Formation Unit Cdr</h3>

            <input type="text" id="unitSearchInput" class="form-control form-space" placeholder="Enter Army Number..." autocomplete="off" maxlength="15" style="font-weight:bold;"/>
            <span class="text-danger" id="unitSearchMessage"></span>
            <div class="d-flex justify-content-end mt-3">
                <button id="unitSearchCancelBtn" class="btn btn-secondary me-2" style="margin-top:10px;">Cancel</button>
                <button id="unitSearchConfirmBtn" class="btn btn-primary" disabled style="margin-top:10px;">Confirm</button>
            </div>
        </div>
    </div>

        </form>
    </div>

    <!-- Submit Button -->

</div>

<script src="~/devjs/Validation.js"></script>
<script src="~/devjs/onlineApplication.js"></script>
<script src="~/lib/inputmask/dist/inputmask.min.js"></script>
<script type="text/javascript" src="~/js/mdb/new-prism.js"></script>
<script type="text/javascript" src="~/js/mdb/mdbsnippet.min.js"></script>
<script type="text/javascript" src="~/js/mdb/mdb.min.js"></script>

<script>
 

    document.getElementById('fillDemoDataBtn').addEventListener('click', function() {
        // Fill in demo data
  
          const fields = [
            // { id: 'armyNumber', value: '1234567'},
            // { id: 'txtSuffix', value: 'A'},
            // { id: 'oldArmyNo', value: '7654321' },
            // { id: 'txtOldSuffix', value: 'B' },
            { id: 'txtApplicantName', value: 'John Doe' },
            // { id: 'dateOfBirth', value: '1980-01-01' },
            // { id: 'dateOfCommission', value: '2005-05-10' },
            // { id: 'dateOfRetirement', value: '2040-01-01' },
            { id: 'aadharCardNo', value: '1234 5678 9012' },
            { id: 'panCardNo', value: 'ABCDE1234F' },
            { id: 'mobileNo', value: '9876543210' },
            { id: 'emailId', value: 'johndoe@example.com' },
            { id: 'emailDomain', value: 'gmail.com' },
            { id: 'totalService', value: '15' },
            { id: 'residualService', value: '10' },
            // { id: 'regtCorps', value: 'Infantry' },
            // { id: 'pcda_pao', value: 'PCDA Bangalore' },
             { id: 'pcda_AcctNo', value: '99/999/999999A' },
            // { id: 'parentUnit', value: 'Parent Unit 1' },
            // { id: 'presentUnit', value: 'Present Unit 1' },
            // { id: 'presentUnitPin', value: '123456' },
            // { id: 'armyPostOffice', value: 'Army PO 123' },
            { id: 'civilPostalAddress', value: 'Test' },
            { id: 'nextFmnHQ', value: 'Next FMN HQ 1' },
            { id: 'Vill_Town', value: 'Demo Village' },
            { id: 'postOffice', value: 'Demo Post Office' },
            { id: 'distt', value: 'Demo District' },
            { id: 'state', value: 'Demo State' },
            { id: 'Code', value: '123456' },
            { id: 'salaryAcctNo', value: '12345678901234567' },
            { id: 'confirmSalaryAcctNo', value: '12345678901234567' },
            { id: 'ifsCode', value: 'HDFC0001234' },
            { id: 'nameOfBank', value: 'HDFC Bank' },
            { id: 'nameOfBankBranch', value: 'HDFC Main Branch' },
            { id: 'monthlyPaySlip', value: '2025-06-01' },
            
            { id: 'basicPay', value: '50000' },
            { id: 'dsop_afpp', value: '1500' },
            { id: 'rank_gradePay', value: '2000' },
            { id: 'agif_Subs', value: '1000' },
            { id: 'msp', value: '3000' },
            { id: 'incomeTaxMonthly', value: '500' },
            { id: 'CI_Pay', value: '1200' },
            { id: 'educationCess', value: '50' },
            { id: 'npax_Pay', value: '800' },
            { id: 'pli', value: '600' },
            { id: 'techPay', value: '400' },
            { id: 'misc_Deduction', value: '200' },
            { id: 'da', value: '3000' },
            { id: 'loanEMI_Outside', value: '1000' },
            { id: 'pmha', value: '500' },
            { id: 'loanEMI', value: '1500' },
            { id: 'lra', value: '2000' },
            { id: 'miscPay', value: '700' }
        ];

        // Loop through each field and set the values
        fields.forEach(function(field) {
            const element = document.getElementById(field.id);
            if (element) {
                element.value = field.value; // Set the value of the input field
                element.removeAttribute('placeholder'); // Remove the placeholder

                // Add the "active" class to float the label above the input field
                $("#" + field.id).closest(".form-outline").addClass("active");

                // Reinitialize MDB Input if needed (for floating labels)
                if (typeof mdb !== 'undefined') {
                    $("#" + field.id).closest(".form-outline").each(function () {
                        new mdb.Input(this).init();
                    });
                }
            }
        });

                const Category = document.getElementById('Category').value; // Get loan type value from hidden input

                if (Category == "1") {
            // HBA Application
            const fields = [
                { id: 'propertyType', value: 'Flat' },
                { id: 'propertySeller', value: 'XYZ Realtors' },
                { id: 'propertyAddress', value: '123, Some Street, City' },
                { id: 'propertyCost', value: '500000' },
                { id: 'HBA_LoanFreq', value: 'Monthly' },
                { id: 'HBA_repayingCapacity', value: '20000' },
                { id: 'HBA_Amt_Eligible_for_loan', value: '400000' },
                { id: 'HBA_EMI_Eligible', value: '15000' },
                { id: 'HBA_Amount_Applied_For_Loan', value: '300000' },
                { id: 'HBA_EMI_Applied', value: '15000' },
                { id: 'HBA_approxEMIAmount', value: '14500' },
                { id: 'HBA_approxDisbursementAmt', value: '290000' }
            ];

            fields.forEach(function(field) {
                const element = document.getElementById(field.id);
                if (element) {
                    element.value = field.value; // Set the value of the field
                    element.removeAttribute('placeholder'); // Remove placeholder if present

                     $("#" + field.id).closest(".form-outline").addClass("active");

                    // Reinitialize MDB Input if needed (for floating labels)
                    if (typeof mdb !== 'undefined') {
                        $("#" + field.id).closest(".form-outline").each(function () {
                            new mdb.Input(this).init();
                        });
                    }

                }
            });
        }
        else if (Category == "2") {
            // CA Application
            const fields = [
                { id: 'dealerName', value: 'ABC Motors' },
                { id: 'companyName', value: 'ABC Company' },
                { id: 'modelName', value: 'Sedan Model 2025' },
                { id: 'vehicleCost', value: '1000000' },
                { id: 'CA_Amt_Eligible_for_loan', value: '800000' },
                { id: 'CA_EMI_Eligible', value: '25000' },
                { id: 'CA_repayingCapacity', value: '20000' },
                { id: 'CA_Amount_Applied_For_Loan', value: '500000' },
                { id: 'CA_EMI_Applied', value: '15000' },
                { id: 'CA_approxEMIAmount', value: '14000' },
                { id: 'CA_approxDisbursementAmt', value: '480000' },
                { id: 'drivingLicenseNo', value: 'DL1234567890' },
                { id: 'validity_Date_DL', value: '2030-12-31' },
                { id: 'DL_IssuingAuth', value: 'RTO City' }
            ];

            fields.forEach(function(field) {
                const element = document.getElementById(field.id);
                if (element) {
                    element.value = field.value; // Set the value of the field
                    element.removeAttribute('placeholder'); // Remove placeholder if present

                     $("#" + field.id).closest(".form-outline").addClass("active");

                    // Reinitialize MDB Input if needed (for floating labels)
                    if (typeof mdb !== 'undefined') {
                        $("#" + field.id).closest(".form-outline").each(function () {
                            new mdb.Input(this).init();
                        });
                    }
                }
            });
        }
        else if(Category == "3")
        {
             const fields = [
                { id: 'PCA_dealerName', value: 'XYZ Electronics' },
                { id: 'PCA_companyName', value: 'XYZ Company' },
                { id: 'PCA_modelName', value: 'Laptop Model 2025' },
                { id: 'computerCost', value: '60000' },
                { id: 'PCA_Amt_Eligible_for_loan', value: '50000' },
                { id: 'PCA_EMI_Eligible', value: '2000' },
                { id: 'PCA_repayingCapacity', value: '1500' },
                { id: 'PCA_Amount_Applied_For_Loan', value: '30000' },
                { id: 'PCA_EMI_Applied', value: '1000' },
                { id: 'PCA_approxEMIAmount', value: '950' },
                { id: 'PCA_approxDisbursementAmt', value: '29000' }
            ];

            // Fill fields with demo data
            fields.forEach(function(field) {
                const element = document.getElementById(field.id);
                if (element) {
                    element.value = field.value; // Set the value of the field
                    element.removeAttribute('placeholder'); // Remove placeholder if present

                    // Add the "active" class to float the label above the input field
                    $("#" + field.id).closest(".form-outline").addClass("active");

                    // Reinitialize MDB Input if needed (for floating labels)
                    if (typeof mdb !== 'undefined') {
                        $("#" + field.id).closest(".form-outline").each(function () {
                            new mdb.Input(this).init();
                        });
                    }
                }
            });
        }

    });

</script>
